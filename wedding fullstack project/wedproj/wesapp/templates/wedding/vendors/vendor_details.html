{% extends 'wedding/layouts/main.html' %}
{% block title %}
Detailing page
{% endblock title %}
{% block link %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Great Vibes">

{% endblock link %}
{% block content %}
<section class="bg-light py-4 my-5"style="min-height: 600px;">
    {% include 'wedding/inc/message.html' %}
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h1 style="text-align: center;font-family: Great Vibes, cursive;"><span
                    style="color: deeppink;text-shadow: 2px 2px 2px darkblue;">R</span>eal<span
                    style="color: deeppink;text-shadow: 2px 2px 2px darkblue;">W</span>edding
                    <span style="color: deeppink;text-shadow: 2px 2px 2px darkblue;">D</span>etails</h1>
                <hr style="border-color: #b8bfc2;">
                <nav aria-label="breadcrumb">
                    <ol class="breadcrumb">
                      <li class="breadcrumb-item"><a href="{% url 'index' %}">Home</a></li>
                      <li class="breadcrumb-item"><a href="{% url 'vendor' products.category.name  %}">Vendor</a></li>
                      <li class="breadcrumb-item active" aria-current="page">{{products}}</li>
                    </ol>
                </nav>
                {% include 'wedding/inc/message.html' %}
            </div>
            <div class="col-4 my-3 pic-box" style="position: relative;">
                {% if products.handpicked%}
                <div class="handpicked" style="background-color: #ff0051;color: #f2f2f2;
                font-weight: bold;display:inline;border-radius:5px;padding:5px;
                position:absolute;top:0;width:115px;z-index:10;
                text-align:center;" >Handpicked</div>
                {% endif %}
                <img src="{{products.hall_image.url}}" class="card-image-top" alt="wedding img"  style="height:200px;">
            </div>
            <div class="col-8 my-3">
                <input type="hidden" value="{{products.id}}" id="pid">
                <h5 class="text-success" >{{products | upper}}</h5>
                <p style="text-decoration: none;"><i class="fa-solid fa-location-dot" style="color: blue;"></i> {{products.adress}}</p>
                <h6 class="my-2" style="color: red;">Current Price: Rs. <s>{{products.old_price}}</s></h6>
                <h5 class="my-2" style="color: green;">Offer Price: Rs. {{products.dis_price}}</h5>
                <button class="btn btn-primary" id="btnCart"><i class="fa-solid fa-cart-shopping"></i></button>
                <button class="btn btn-danger" id="btnFav"><i class="fa-solid fa-heart"></i></button>
            </div>
        </div>
    </div>
</section>
<script>
document.addEventListener("DOMContentLoaded", function(event){
    const pid = document.getElementById("pid");
    const btnCart = document.getElementById("btnCart");
    const btnFav = document.getElementById("btnFav");

    btnCart.addEventListener("click", function() {
        let postObj={
            pid: pid.value
        }
        //console.log(postObj);

        fetch("/addtocart",{
            method: 'POST',
            headers:{
                'Accept': 'application/json',
                'X-Requested-With': 'XMLHttpRequest',
                'X-CSRFToken': '{{ csrf_token }}',
            },
            body: JSON.stringify(postObj)
        }).then(response => {
            return response.json();
        }).then(data => {
            //console.log(data);
            alert(data['status']);
            
        });
    });

    btnFav.addEventListener("click", function() {
        let postObj={
            pid: pid.value
        }
        //console.log(postObj);

        fetch("/fav",{
            method: 'POST',
            headers:{
                'Accept': 'application/json',
                'X-Requested-With': 'XMLHttpRequest',
                'X-CSRFToken': '{{ csrf_token }}',
            },
            body: JSON.stringify(postObj)
        }).then(response => {
            return response.json();
        }).then(data => {
            //console.log(data);
            alert(data['status']);
            
        });
    });
});

</script>
{% endblock content %}